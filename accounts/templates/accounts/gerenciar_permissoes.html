{% load static %}
{% block content %}

<h2>Gerenciar Permissões</h2>

<div style="display:flex; gap:20px; margin-bottom:20px;">
    
    <!-- Grupo -->
    <div>
        <label>Grupo:</label>
        <select id="select_grupo" onchange="selecionarAlvo('grupo')">
            <option value="">-- selecione --</option>
            {% for g in grupos %}
                <option value="{{ g.id }}">{{ g.name }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- Usuário -->
    <div>
        <label>Usuário:</label>
        <select id="select_usuario" onchange="selecionarAlvo('usuario')">
            <option value="">-- selecione --</option>
            {% for u in usuarios %}
                <option value="{{ u.id }}">{{ u.username }}</option>
            {% endfor %}
        </select>
    </div>

</div>

<hr>

<h3>Módulos</h3>
<ul id="lista_modulos">
    {% for modulo in modulos %}
        <li>
            <button onclick="carregarViewsModulo({{ modulo.id }})">
                {{ modulo.nome }}
            </button>
        </li>
    {% endfor %}
</ul>

<hr>

<!-- Tabela de Views -->
<table border="1" width="100%">
    <thead>
        <tr>
            <th>Acessar</th>
            <th>Nome</th>
            <th>Rota</th>
        </tr>
    </thead>
    <tbody id="area_views"></tbody>
</table>

<!-- TEMPLATE HTML CLONÁVEL -->
<template id="linha_view_template">
    <tr>
        <td><input type="checkbox" class="chk-permissao"></td>
        <td class="col-nome"></td>
        <td class="col-rota"></td>
    </tr>
</template>

<input type="hidden" id="csrf_token" value="{{ csrf_token }}">
<script src="{% static 'javascript/permissoes.js' %}"></script>

{% endblock %}
