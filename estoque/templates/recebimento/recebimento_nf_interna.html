{% extends "templates/base_3.html" %}
{% load static %}

{% block content %}

<div class="lista-itens">

    {% for item in nf %}
        <a href="javascript:void(0)"
           onclick="preencheQuantidade({{item.quantidade}}, '{{item.produto.nome}}', {{forloop.counter0}})"
           data-index="{{forloop.counter0}}">
            {{ item.produto.nome }}
        </a>
    {% endfor %}

    <br><br>
    <p id="NF">{{ numero_nf }}</p>

</div>

{% endblock content %}



{% block content_2 %}

<!-- üÜï CAMPO DO PEDIDO + BOT√ÉO LUPA -->
<div style="display: flex; align-items: center; gap: 8px; margin-bottom: 20px;">

    <label for="pedido_id">Pedido de Compra:</label>

    <input 
        type="text"
        id="numero_pedido"
        name="numero_pedido"
        value="{% if pedido_encontrado %}{{ pedido_encontrado.numero }}{% endif %}"
        placeholder="Informe o pedido"
        readonly
    >

    <!-- bot√£o da lupa -->
    <button 
        type="button"
        onclick="abrirListaPedidos()"
        style="background: none; border: none; cursor: pointer; font-size: 22px;"
        title="Buscar Pedido"
    >
        üîç
    </button>

</div>


<div class='form-recebimento-interno'><!-- FORM ORIGINAL DOS LOTES -->
    {% for lote in form %}
        {{ lote.label }}{{ lote }}
    {% endfor %}
    <label for="dep" id="label-select">Selecione o dep√≥sito</label>
    <select class="select-deposito">
        {% for dep in depositos %}
            <option id="dep">{{ dep.nome }}</option>
        {% endfor %}
    </select>
</div>



{{ nomes_itens|json_script:"nomes_itens_js" }}

{% endblock content_2 %}



{% block content_3 %}

    <div class="gravar_recebimento_interno"><!-- √ÅREA ONDE A LISTA DE PEDIDOS SER√Å CARREGADA -->
        <div class="area-compras"></div>
        

        <button id="salvar" type="button">Salvar</button>
        <button id="enviar-form" type="submit" style="display:none">Gravar na base</button>

        <script src="{% static 'javascript/recebimento_nf_interna.js' %}" defer></script>


        <!-- JS LUPA -->
        <script>
        function abrirListaPedidos() {
            // ABRE A LISTA DE PEDIDOS EM NOVA ABA
            window.open("/recebimento/compras_em_aberto/", "_blank");
        }
        </script>
    </div>
{% endblock content_3 %}
